{% extends 'base.html' %}

{% block title %}Analysis Result â€¢ AI Content Curator{% endblock %}

{% block content %}
<section class="card-surface p-6">
  <div class="flex items-center gap-3 mb-4">
    <i class="fa-solid fa-magnifying-glass-chart" style="color:#6366f1"></i>
    <h1 class="text-2xl font-semibold">Analysis Result</h1>
  </div>

  <div class="flex items-start justify-between gap-4">
    <div>
      <h2 class="text-xl font-semibold">{{ card.article.title or card.article.url }}</h2>
      {% if card.article.author %}
      <p class="text-sm" style="color:#64748b">By {{ card.article.author }}</p>
      {% endif %}
      <p class="mt-3 text-sm" style="color:#334155">{{ card.article.summary }}</p>
    </div>
    <div class="badge-score-lg">{{ '%.0f' % card.overall_score }}</div>
  </div>

  <div class="mt-6 grid" style="gap:16px;grid-template-columns:1fr 1fr;">
    <div>
      <div class="flex justify-between text-xs" style="color:#64748b"><span>Readability</span><span>{{ '%.2f' % card.readability_score }}</span></div>
      <div class="progress-rail"><div class="progress-fill" style="background:#0284c7;width: {{ card.readability_score }}%"></div></div>
    </div>
    <div>
      <div class="flex justify-between text-xs" style="color:#64748b"><span>NER Density</span><span>{{ '%.2f' % card.ner_density_score }}</span></div>
      <div class="progress-rail"><div class="progress-fill" style="background:#059669;width: {{ card.ner_density_score }}%"></div></div>
    </div>
    <div>
      <div class="flex justify-between text-xs" style="color:#64748b"><span>Sentiment (neutrality)</span><span>{{ '%.2f' % card.sentiment_score }}</span></div>
      <div class="progress-rail"><div class="progress-fill" style="background:#d97706;width: {{ card.sentiment_score }}%"></div></div>
    </div>
    <div>
      <div class="flex justify-between text-xs" style="color:#64748b"><span>Relevance</span><span>{{ '%.2f' % card.tfidf_relevance_score }}</span></div>
      <div class="progress-rail"><div class="progress-fill" style="background:#6366f1;width: {{ card.tfidf_relevance_score }}%"></div></div>
    </div>
    <div style="grid-column:1/-1">
      <div class="flex justify-between text-xs" style="color:#64748b"><span>Recency</span><span>{{ '%.2f' % card.recency_score }}</span></div>
      <div class="progress-rail"><div class="progress-fill" style="background:#a21caf;width: {{ card.recency_score }}%"></div></div>
    </div>
  </div>

  {% if card.article.entities %}
  <div class="mt-6">
    <h3 class="text-sm font-semibold" style="color:#0f172a;margin-bottom:0.5rem">Entities</h3>
    <div style="display:flex;flex-wrap:wrap;gap:8px">
      {% for e in card.article.entities %}
        <span class="chip">{{ e.label }}: {{ e.text }}</span>
      {% endfor %}
    </div>
  </div>
  {% endif %}

  <div class="mt-6 flex items-center gap-3">
    <a class="rounded-lg border px-4 py-2 text-sm" style="border-color:#e2e8f0;background:#ffffff" href="{{ card.article.url }}" target="_blank" rel="noopener"><i class="fa-solid fa-arrow-up-right-from-square" style="margin-right:0.5rem"></i>Open Source</a>
    <a class="rounded-lg border px-4 py-2 text-sm" style="border-color:#e2e8f0;background:#ffffff" href="/"><i class="fa-solid fa-house" style="margin-right:0.5rem"></i>Home</a>
  </div>
</section>
{% endblock %}


